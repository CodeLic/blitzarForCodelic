var v=Object.defineProperty;var u=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var f=(o,t,e)=>t in o?v(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,c=(o,t)=>{for(var e in t||(t={}))g.call(t,e)&&f(o,e,t[e]);if(u)for(var e of u(t))O.call(t,e)&&f(o,e,t[e]);return o};import{v as b,T as w,r as d}from"./framework.80e446ab.js";import{_ as k,o as B,k as _,I as x,O as I,g as C,y as q,h as E}from"./plugin-vue_export-helper.940ab1d0.js";function T(o){return Object.prototype.toString.call(o).slice(8,-1)}function m(o){return T(o)!=="Object"?!1:o.constructor===Object&&Object.getPrototypeOf(o)===Object.prototype}function D(o){return T(o)==="Array"}const P=o=>{typeof o.remove!="undefined"?o.remove():o.parentNode.removeChild(o)};class A{constructor(t,e){this.startedAt=Date.now(),this.callback=t,this.delay=e,this.timer=setTimeout(t,e)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const r={TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"};var p=Object.freeze(r);function h(o,t,e){let s=null;switch(o){case r.TOP:case r.TOP_RIGHT:case r.TOP_LEFT:s=t;break;case r.BOTTOM:case r.BOTTOM_RIGHT:case r.BOTTOM_LEFT:s=e;break}return s}class M{constructor(){this.queue={}}$on(t,e){this.queue[t]=this.queue[t]||[],this.queue[t].push(e)}$off(t,e){if(this.queue[t]){for(var s=0;s<this.queue[t].length;s++)if(this.queue[t][s]===e){this.queue[t].splice(s,1);break}}}$emit(t,e){this.queue[t]&&this.queue[t].forEach(function(s){s(e)})}}var l=new M;const N={name:"toast",props:{message:{type:String,required:!0},type:{type:String,default:"default"},position:{type:String,default:p.BOTTOM_RIGHT,validator(o){return Object.values(p).includes(o)}},maxToasts:{type:[Number,Boolean],default:!1},duration:{type:[Number,Boolean],default:4e3},dismissible:{type:Boolean,default:!0},queue:{type:Boolean,default:!1},pauseOnHover:{type:Boolean,default:!0},useDefaultCss:{type:Boolean,default:!0},onClose:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1,timer:null}},beforeMount(){this.createParents(),this.setDefaultCss(),this.setupContainer()},mounted(){this.showNotice(),l.$on("toast-clear",this.close)},methods:{createParents(){this.parentTop=document.querySelector(".c-toast-container--top"),this.parentBottom=document.querySelector(".c-toast-container--bottom"),!(this.parentTop&&this.parentBottom)&&(this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="c-toast-container c-toast-container--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="c-toast-container c-toast-container--bottom"))},setDefaultCss(){const o=this.useDefaultCss?"add":"remove";this.parentTop.classList[o]("v--default-css"),this.parentBottom.classList[o]("v--default-css")},setupContainer(){const o=document.body;o.appendChild(this.parentTop),o.appendChild(this.parentBottom)},shouldQueue(){return!this.queue&&this.maxToasts===!1?!1:this.maxToasts!==!1?this.maxToasts<=this.parentTop.childElementCount+this.parentBottom.childElementCount:this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}this.correctParent.insertAdjacentElement("afterbegin",this.$el),this.isActive=!0,this.timer=this.duration!==!1?new A(this.close,this.duration):null},click(){this.onClick.apply(null,arguments),this.dismissible&&this.close()},toggleTimer(o){this.timer&&this.pauseOnHover&&(o?this.timer.pause():this.timer.resume())},stopTimer(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer)},close(){this.stopTimer(),this.isActive=!1,setTimeout(()=>{this.onClose.apply(null,arguments),P(this.$el)},150)}},computed:{correctParent(){return h(this.position,this.parentTop,this.parentBottom)},transition(){return h(this.position,{enter:"fadeInDown",leave:"fadeOut"},{enter:"fadeInUp",leave:"fadeOut"})}},beforeUnmount(){l.$off("toast-clear",this.close)}},H=["innerHTML"];function S(o,t,e,s,i,a){return B(),_(w,{"enter-active-class":a.transition.enter,"leave-active-class":a.transition.leave},{default:x(()=>[I(C("div",{class:q(["c-toast",`c-toast--${e.type}`,`c-toast--${e.position}`]),onMouseover:t[0]||(t[0]=n=>a.toggleTimer(!0)),onMouseleave:t[1]||(t[1]=n=>a.toggleTimer(!1)),onClick:t[2]||(t[2]=(...n)=>a.click&&a.click(...n)),role:"alert",innerHTML:e.message},null,42,H),[[b,i.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}var j=k(N,[["render",S]]);const L=()=>typeof document!="undefined"&&document.createElement("div"),U=(o,{props:t,children:e,element:s,app:i}={})=>{let a=s||L(),n=E(o,t,e);return i&&i._context&&(n.appContext=i._context),d(n,a),{vNode:n,destroy:()=>{a&&d(null,a),a=null,n=null},el:a}},z=(o={})=>({show(t,e={}){let s=c({message:t},e);return U(j,{props:c(c({},o),s)})},clear(){l.$emit("toast-clear")},success(t,e={}){return e.type="success",this.show(t,e)},error(t,e={}){return e.type="error",this.show(t,e)},info(t,e={}){return e.type="info",this.show(t,e)},warning(t,e={}){return e.type="warning",this.show(t,e)}}),y=z();function Q(o,t,e){if(e==="default"||m(t)&&t.origin==="default")return;const s=m(t)||D(t)?JSON.stringify(t,void 0,2):t;if(s){y.show(o+`
`+s);return}y.show(o)}export{Q as s};
